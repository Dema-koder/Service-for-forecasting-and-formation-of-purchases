# Сервис Прогнозирования и Планирования Закупок

Этот сервис использует данные о прошлых закупках и бухгалтерскую информацию для:
- Визуализации статистики
- Прогнозирования потребностей в закупках
- Подготовки данных для планирования закупок

Цель сервиса - сократить трудозатраты государственных учреждений на планирование закупок, автоматизируя прогнозирование потребностей в продуктах и их количестве.

## Функции

- **Чат-бот интерфейс**: Взаимодействие с сервисом через удобный интерфейс чат-бота.
- **Консолидация данных**: Интеграция данных о прошлых закупках и бухгалтерской информации.
- **Прогнозирование**: Использование моделей машинного обучения для предсказания будущих потребностей в закупках.
- **Визуализация**: Предоставление графических представлений и отчетов о данных по закупкам.
- **Коррекция прогнозов на месте**: Пользователь может изменить результирующий файл в боте без использования дополнительных инструментов.

## Архитектура

Архитектура включает в себя следующие ключевые компоненты:

1. **Пользовательский интерфейс (UI)**
   - Чат-бот интегрированный с популярным мессенджером Telegram.

2. **Сервис управления диалогами**
   - Предоставляет пользователю удобный интерфейс.
   - Обрабатывает запросы пользователей и управляет диалоговыми потоками с использованием NLP.

4. **Сервис обработки данных**
   - Консолидирует, очищает, проверяет и предварительно обрабатывает данные о закупках.

5. **Сервис аналитики и прогнозирования**
   - Анализирует исторические данные и использует модель машинного обучения ARIMA для прогнозирования.

6. **Сервис визуализации данных**
   - Создает диаграммы и отчеты для представления данных.

7. **База данных**
   - Хранит данные о закупках, бухгалтерскую информацию и результаты анализа, используя NoSQL базы данных (MongoDB).

8. **Сервис аутентификации и авторизации**
   - Управляет доступом пользователей к различным функциям сервиса.
   - Использует Keycloak, очень безопасное и популярное приложение.

## Технологический стек

- **Чат-бот и интерфейс**: Python, Aiogram, PostgreSQL
- **Обработка и анализ данных**: Python, pandas, scikit-learn
- **База данных**: MongoDB
- **Визуализация**: Python, pandas, matplotlib
- **Инфраструктура и развертывание**: Docker, Docker Compose
- **Бэкенд**: Java, SpringBoot, ChatGPT
- **Документация**: Swagger, Archi, OpenAPI

## Начало работы

### Предварительные требования

- Docker/Docker Compose

### Установка

1. **Клонируйте репозиторий**:
    ```sh
    git clone https://github.com/yourusername/procurement-forecasting-service.git
    cd procurement-forecasting-service
    ```

2. **Настройте окружение**:
   - Заполните пропуски в `docker-compose.yml`
   - Пример:
     ```env
     DATABASE_URL: postgresql://username:password@localhost:5432/procurement_db
     MONGO_URL: mongodb://localhost:27017
     ...
     ```

3. **Соберите и запустите сервисы с помощью Docker**:
    ```sh
    docker-compose up --build
    ```

### Использование

1. **Доступ к чат-боту**:
   - Откройте чат-бот в Telegram

2. **Взаимодействие с чат-ботом**:
   - Используйте естественный язык для запроса данных о закупках, прогнозов и визуализаций.
   - Используйте удобные и простые кнопки для выполнения тех же действий.

### Взаимодействие пользователя с сервисом
1. Сначала введите команду /start в боте.

2. Авторизуйтесь с помощью Keycloak через ссылку, предоставленную ботом.

3. Подтвердите, что вы авторизованы
   a. Примите пользовательский случай

   b. Отклоните пользовательский случай

4. Выберите, что вы хотите сделать
   1. Используйте кнопки, тогда поток будет простым: выберите опцию и введите параметр, который запросит бот.
   2. Введите в ваше сообщение, выбрав опцию и ее параметры, например: Найди сколько осталось на складе бумаги.

6. Получите ответ и визуализации, если ваш запрос был успешен.

7. Если вы хотите сохранить запрашиваемый прогноз, вы можете скачать json-файл, отправленный ботом.
8. Если вы хотите изменить json в Telegram, выберите кнопку для редактирования.
9. Обновите или оставьте параметры json без изменений.
10. Сохраните обновленный json.

## Участие

Мы приветствуем участие! Пожалуйста, следуйте этим шагам:

1. Форкните репозиторий.
2. Создайте новую ветку (`git checkout -b feature/YourFeature`).
3. Закоммитьте ваши изменения (`git commit -am 'Add new feature'`).
4. Запушьте в ветку (`git push origin feature/YourFeature`).
5. Создайте новый Pull Request.

## Лицензия

Этот проект лицензирован по лицензии MIT - см. файл [LICENSE](LICENSE) для подробностей.
